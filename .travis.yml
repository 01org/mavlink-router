language: cpp
dist: bionic
cache: pip
matrix:
  include:
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-6
            - gcc-6
            - python3-pip
            - python3-setuptools

before_script:
        - pip3 install --user flake8 future pymavlink
        - flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
        - CXX="g++-6"
        - CC="gcc-6"

script:
        - ./autogen.sh c --with-systemdsystemunitdir=/usr/lib/systemd/system
        - make -j
        - make check PYTHON=python3
